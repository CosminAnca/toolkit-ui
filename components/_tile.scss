/* ==========================================================================
   COMPONENTS / TILE
   ========================================================================== */

$tile-border-width: 6px !default;
$tile-outer-border-colour: rgba(255, 255, 255, 0.2);
$tile-padding: $spacing-unit-small !default;

/**
 * The base of the tile; provides the glass "border" and shadow. Nothing else.
 */
.c-tile {
  position: relative;
  background: transparent;
  box-shadow: 1px 1px 15px rgba(0, 0, 0, 0.2);
  border: 1px solid $tile-outer-border-colour;
  padding: $tile-border-width;
  margin-bottom: $spacing-unit;
  will-change: transform;
}

/**
 * The inner container of the tile provides the background gradient and extra
 * positioning for square tiles
 */
.c-tile__content {
  @include background-gradient("small", "radial");

  @include mq($from: medium) {
    .c-tile--square & {
      position: absolute;
      top: $tile-border-width;
      right: $tile-border-width;
      bottom: $tile-border-width;
      left: $tile-border-width;
      overflow: hidden; // Defensively clip overflowing text that can't be handled because of absolute positioning
    }
  }

  > :last-child {
    margin-bottom: 0;
  }

}

/**
 * The body/copy container for the tile; This should be applied to any content
 * which doesn't sit flush to the edge of the tile.
 */
.c-tile__body {
  padding: $tile-padding;

  > :last-child {
    margin-bottom: 0;
  }

}

/* Links
  =========================================== */

/**
 * Tiles can have links, just wrap the `.c-tile__content` with a `a.c-tile__link`
 * node.
 */
.c-tile__link {
  display: block;
  color: inherit;

  &,
  &:hover,
  &:focus {
    text-decoration: none;
  }
}

/* Media
  =========================================== */

/**
 * Container for tile media which takes the top 55% of the tile when used.
 * This usually (but not always) contains a .c-tile-poster.
 *
 * Media and caption pairs should only be used in conjunction with the
 * `c-tile--square` modifier
 */
.c-tile__media {
  display: none;

  @include mq($from: medium) {
    overflow: none;
    display: block;
    height: 55%;
  }
}

/**
 * A poster is a full bleed image which scales when the lniked tile is hovered.
 */
.c-tile__poster {
  transition: transform 1s ease;
  will-change: transform;

  .c-tile__link:hover & {
    transform: scale(1.05, 1.05);
  }
}

/**
 * Captions are needed for media tiles; they add a new background gradient and
 * take up the lower 50% of the tile.
 */
.c-tile__caption {
  @include background-gradient("small", "radial");

  position: relative;
  transition: background 0.6s ease;

  @include mq($from: medium) {
    height: 45%;
  }

  // Pseudo element used for hover state background
  &::before {
    @include background-gradient("large", "radial");
    will-change: transform;

    content: "";
    opacity: 0;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    transition: opacity 0.6s ease;

    .c-tile__link:hover & {
      opacity: 1;
    }
  }

}

/* Titles
  =========================================== */

/**
 * Large scalable title for large tiles (typically those used in >=50% widths)
 *
 * Normal heading classes e.g. `c-heading-alpha` are more useful in flexible
 * tiles, but square tiles need more specific and scalable headings in order to
 * prevent overflow â€“ hence the explicit font-size and line-height values rather
 * than the `@font-size mixin`.
 */
.c-tile__title {
  position: relative;
  font-size: $text-delta;
  line-height: 1.3;

  @include mq($from: medium) {
    font-size: 3.4vw;
  }

  @include mq($from: large) {
    font-size: $text-gamma;
  }
}

/**
 * Smaller static titles for smaller tiles (usually 33% widths)
 */
.c-tile__small-title {
  position: relative;
  font-size: $text-delta;
  line-height: 1.3;

  @include mq($from: medium) {
    font-size: $text-body;
  }
}

/* Square modifier
  =========================================== */

/**
 * Forces the tile to keep a square ratio
 */
.c-tile--square {
  @include mq($from: medium) {
    height: 0;
    padding-top: 100%;
  }
}
